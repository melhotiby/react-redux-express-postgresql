{"version":3,"sources":["actions/auth.js","actions/payments.js","components/Payments/Payments.js","components/Header/Header.js","components/Landing/Landing.js","components/App.js","reducers/index.js","reducers/authReducer.js","api/auth.js","api/Constants.js","sagas/auth.js","api/payments.js","sagas/payments.js","sagas/index.js","index.js"],"names":["FETCH_USER","fetchUser","type","fetchUserSuccess","payload","user","fetchUserError","error","HANDLE_STRIPE_TOKEN","Payments","this","props","email","handleToken","amount","currency","allowRememberMe","name","description","stripeKey","process","token","className","Component","connect","Header","auth","href","key","style","margin","credits","to","id","renderContent","Landing","textAlign","Dashboard","SurveyNew","App","exact","path","component","combineReducers","state","action","axios","get","getUser","watchGetUserRequest","call","api","response","put","data","takeEvery","authSagas","fork","post","handleStripeToken","watchHandleTokenRequest","console","log","take","paymentsSagas","rootSaga","all","AuthSagas","PaymentsSagas","middleware","enhancers","sageMiddleware","createSagaMiddleware","push","logger","applyMiddleware","enhancer","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","reducers","run","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.1002aec3.chunk.js","sourcesContent":["export const FETCH_USER = 'FETCH_USER'\nexport const FETCH_USER_SUCCESS = 'FETCH_USER_SUCCESS'\nexport const FETCH_USER_ERROR = 'FETCH_USER_ERROR'\n\nexport const fetchUser = () => ({\n  type: FETCH_USER\n})\n\nexport const fetchUserSuccess = ({ user }) => ({\n  type: FETCH_USER_SUCCESS,\n  payload: { user }\n})\n\nexport const fetchUserError = ({ error }) => ({\n  type: FETCH_USER_ERROR,\n  payload: { error }\n})\n","export const HANDLE_STRIPE_TOKEN = 'HANDLE_STRIPE_TOKEN'\n\nexport const handleToken = token => {\n  return {\n    type: HANDLE_STRIPE_TOKEN,\n    payload: { token }\n  }\n}\n","import React, { Component } from 'react'\nimport StripeCheckout from 'react-stripe-checkout'\nimport { connect } from 'react-redux'\nimport { handleToken } from '../../actions/payments'\n\nclass Payments extends Component {\n  render() {\n    const { REACT_APP_STRIPE_KEY } = process.env\n    const { email, handleToken } = this.props\n\n    return (\n      <StripeCheckout\n        amount={500} // $5 in cents\n        currency=\"USD\"\n        allowRememberMe={false}\n        email={email}\n        name=\"Emaily\" // the pop-in header title\n        description=\"$5 for 5 email credits\" // the pop-in header subtitle\n        stripeKey={REACT_APP_STRIPE_KEY}\n        token={token => handleToken(token)}>\n        <button className=\"btn\">Add Credits</button>\n      </StripeCheckout>\n    )\n  }\n}\n\nexport default connect(\n  null,\n  {\n    handleToken\n  }\n)(Payments)\n","import React, { Component } from 'react'\nimport { connect } from 'react-redux'\nimport { Link } from 'react-router-dom'\nimport Payments from '../Payments/Payments'\n\nclass Header extends Component {\n  renderContent() {\n    const { auth } = this.props\n    switch (auth) {\n      case null:\n        return\n      case false:\n        return (\n          <li>\n            <a href=\"/auth/google\">Sign with Google</a>\n          </li>\n        )\n      default:\n        return [\n          <li key=\"1\" style={{ margin: '0 10px' }}>\n            Credits: {auth.credits}\n          </li>,\n          <li key=\"2\">\n            <Payments email={auth.email} />\n          </li>,\n          <li key=\"3\">\n            <a href=\"/api/logout\">Logout</a>\n          </li>\n        ]\n    }\n  }\n\n  render() {\n    const { auth } = this.props\n\n    return (\n      <nav>\n        <div className=\"nav-wrapper\">\n          <Link to={auth ? '/surveys' : '/'} className=\"brand-logo left\">\n            Emaily\n          </Link>\n          <ul id=\"nav-mobile\" className=\"right\">\n            {this.renderContent()}\n          </ul>\n        </div>\n      </nav>\n    )\n  }\n}\n\nconst mapStateToProps = ({ auth }) => {\n  return { auth }\n}\n\nexport default connect(mapStateToProps)(Header)\n","import React from 'react'\n\nconst Landing = () => (\n  <div style={{ textAlign: 'center' }}>\n    <h1>Emaily</h1>\n    Collect feedback for your application\n  </div>\n)\n\nexport default Landing\n","import React, { Component } from 'react'\nimport { BrowserRouter, Route } from 'react-router-dom'\nimport { connect } from 'react-redux'\nimport { fetchUser } from '../actions/auth'\n\nimport Header from './Header/Header'\nimport Landing from './Landing/Landing'\n\nconst Dashboard = () => <h2>Dashboard</h2>\nconst SurveyNew = () => <h2>SurveyNew</h2>\n\nclass App extends Component {\n  constructor(props) {\n    super(props)\n\n    this.props.fetchUser()\n  }\n\n  render() {\n    return (\n      <div>\n        <BrowserRouter>\n          <div className=\"container\">\n            <Header />\n            <Route exact path=\"/\" component={Landing} />\n            <Route exact path=\"/surveys\" component={Dashboard} />\n            <Route exact path=\"/survey/new\" component={SurveyNew} />\n          </div>\n        </BrowserRouter>\n      </div>\n    )\n  }\n}\n\nexport default connect(\n  null,\n  {\n    fetchUser\n  }\n)(App)\n","import { combineReducers } from 'redux'\nimport authReducer from './authReducer'\n\nexport default combineReducers({\n  auth: authReducer\n})\n","import { FETCH_USER_SUCCESS, FETCH_USER_ERROR } from '../actions/auth'\n\nconst INITIAL_STATE = null\n\nexport default function(state = INITIAL_STATE, action) {\n  switch (action.type) {\n    case FETCH_USER_SUCCESS:\n      return action.payload.user || false\n    case FETCH_USER_ERROR:\n      return false\n    default:\n      return state\n  }\n}\n","import axios from 'axios'\nimport { USER_ENDPOINT } from './Constants'\n\nexport const fetchUser = () => {\n  return axios.get(USER_ENDPOINT)\n}\n","export const USER_ENDPOINT = '/api/current_user'\nexport const STIPE_PAYMENTS_ENDPOINT = '/api/stripe'\n","import { takeEvery, call, fork, put } from 'redux-saga/effects'\nimport { FETCH_USER, fetchUserError, fetchUserSuccess } from '../actions/auth'\n\nimport * as api from '../api/auth'\n\nfunction* getUser() {\n  try {\n    const response = yield call(api.fetchUser)\n    yield put(\n      fetchUserSuccess({\n        user: response.data\n      })\n    )\n  } catch (e) {\n    yield put(\n      fetchUserError({\n        error: false\n      })\n    )\n  }\n}\n\nfunction* watchGetUserRequest() {\n  yield takeEvery(FETCH_USER, getUser)\n}\n\nconst authSagas = [fork(watchGetUserRequest)]\n\nexport default authSagas\n","import axios from 'axios'\nimport { STIPE_PAYMENTS_ENDPOINT } from './Constants'\n\nexport const handleToken = ({ token }) => {\n  return axios.post(STIPE_PAYMENTS_ENDPOINT, token)\n}\n","import { take, call, fork, put } from 'redux-saga/effects'\nimport { HANDLE_STRIPE_TOKEN } from '../actions/payments'\nimport { fetchUser } from '../actions/auth'\n\nimport * as api from '../api/payments'\n\nfunction* handleStripeToken({ token }) {\n  try {\n    const response = yield call(api.handleToken, { token })\n\n    yield put(\n      fetchUser({\n        user: response.data\n      })\n    )\n  } catch (e) {\n    console.log(e)\n  }\n}\n\nfunction* watchHandleTokenRequest() {\n  while (true) {\n    const action = yield take(HANDLE_STRIPE_TOKEN)\n    yield call(handleStripeToken, { token: action.payload.token })\n  }\n}\n\nconst paymentsSagas = [fork(watchHandleTokenRequest)]\n\nexport default paymentsSagas\n","import AuthSagas from './auth'\nimport PaymentsSagas from './payments'\nimport { all } from 'redux-saga/effects'\n\nexport default function* rootSaga() {\n  yield all([...AuthSagas, ...PaymentsSagas])\n}\n","import 'materialize-css/dist/css/materialize.min.css'\nimport React from 'react'\nimport ReactDOM from 'react-dom'\nimport logger from 'redux-logger'\nimport createSagaMiddleware from 'redux-saga'\nimport { Provider } from 'react-redux'\nimport { createStore, applyMiddleware, compose } from 'redux'\n\nimport App from './components/App'\nimport reducers from './reducers'\nimport rootSaga from './sagas'\n\n/* ------------- Redux Configuration ------------- */\n\nconst middleware = []\nconst enhancers = []\n\n/* ------------- Saga Middleware ------------- */\nconst sageMiddleware = createSagaMiddleware()\nmiddleware.push(sageMiddleware)\n\n/* ------------- Logger Middleware ------------- */\n\nmiddleware.push(logger)\n\n/* ------------- Assemble Middleware ------------- */\n\nenhancers.push(applyMiddleware(...middleware))\n\n/* ------------- Apply REDUX Dev tools ------------- */\n\nconst composeEnhancers =\n  (typeof window !== 'undefined' &&\n    window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__) ||\n  compose\n\n/* ------------- Create Store ------------- */\n\nconst enhancer = composeEnhancers(...enhancers)\nconst store = createStore(reducers, {}, enhancer)\nsageMiddleware.run(rootSaga)\n\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById('root')\n)\n"],"sourceRoot":""}