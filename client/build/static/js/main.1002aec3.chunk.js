(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{49:function(e,t,n){e.exports=n(78)},78:function(e,t,n){"use strict";n.r(t);n(50);var a=n(0),r=n.n(a),c=n(24),u=n.n(c),o=n(44),l=n.n(o),s=n(48),i=n(15),p=n(12),m=n(18),b=n(19),E=n(21),f=n(20),d=n(22),h=n(27),v=n(16),O="FETCH_USER",y=function(){return{type:O}},j=function(e){return{type:"FETCH_USER_SUCCESS",payload:{user:e.user}}},k=function(e){return{type:"FETCH_USER_ERROR",payload:{error:e.error}}},x=n(46),w=n.n(x),_="HANDLE_STRIPE_TOKEN",S=function(e){function t(){return Object(m.a)(this,t),Object(E.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){var e=this.props,t=e.email,n=e.handleToken;return r.a.createElement(w.a,{amount:500,currency:"USD",allowRememberMe:!1,email:t,name:"Emaily",description:"$5 for 5 email credits",stripeKey:"pk_test_M4IGEmSMP00iktaiZiDxK5lW00kk48GHpH",token:function(e){return n(e)}},r.a.createElement("button",{className:"btn"},"Add Credits"))}}]),t}(a.Component),C=Object(i.b)(null,{handleToken:function(e){return{type:_,payload:{token:e}}}})(S),g=function(e){function t(){return Object(m.a)(this,t),Object(E.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(b.a)(t,[{key:"renderContent",value:function(){var e=this.props.auth;switch(e){case null:return;case!1:return r.a.createElement("li",null,r.a.createElement("a",{href:"/auth/google"},"Sign with Google"));default:return[r.a.createElement("li",{key:"1",style:{margin:"0 10px"}},"Credits: ",e.credits),r.a.createElement("li",{key:"2"},r.a.createElement(C,{email:e.email})),r.a.createElement("li",{key:"3"},r.a.createElement("a",{href:"/api/logout"},"Logout"))]}}},{key:"render",value:function(){var e=this.props.auth;return r.a.createElement("nav",null,r.a.createElement("div",{className:"nav-wrapper"},r.a.createElement(h.b,{to:e?"/surveys":"/",className:"brand-logo left"},"Emaily"),r.a.createElement("ul",{id:"nav-mobile",className:"right"},this.renderContent())))}}]),t}(a.Component),R=Object(i.b)((function(e){return{auth:e.auth}}))(g),T=function(){return r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement("h1",null,"Emaily"),"Collect feedback for your application")},U=function(){return r.a.createElement("h2",null,"Dashboard")},N=function(){return r.a.createElement("h2",null,"SurveyNew")},H=function(e){function t(e){var n;return Object(m.a)(this,t),(n=Object(E.a)(this,Object(f.a)(t).call(this,e))).props.fetchUser(),n}return Object(d.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(h.a,null,r.a.createElement("div",{className:"container"},r.a.createElement(R,null),r.a.createElement(v.a,{exact:!0,path:"/",component:T}),r.a.createElement(v.a,{exact:!0,path:"/surveys",component:U}),r.a.createElement(v.a,{exact:!0,path:"/survey/new",component:N}))))}}]),t}(a.Component),D=Object(i.b)(null,{fetchUser:y})(H),F=Object(p.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_USER_SUCCESS":return t.payload.user||!1;case"FETCH_USER_ERROR":return!1;default:return e}}}),I=n(10),M=n.n(I),A=n(34),G=n(6),K=n(28),L=n.n(K),P=function(){return L.a.get("/api/current_user")},J=M.a.mark(B),X=M.a.mark(V);function B(){var e;return M.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(G.b)(P);case 3:return e=t.sent,t.next=6,Object(G.d)(j({user:e.data}));case 6:t.next=12;break;case 8:return t.prev=8,t.t0=t.catch(0),t.next=12,Object(G.d)(k({error:!1}));case 12:case"end":return t.stop()}}),J,null,[[0,8]])}function V(){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(G.f)(O,B);case 2:case"end":return e.stop()}}),X)}var W=[Object(G.c)(V)],Z=function(e){var t=e.token;return L.a.post("/api/stripe",t)},$=M.a.mark(z),q=M.a.mark(Q);function z(e){var t,n;return M.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.token,a.prev=1,a.next=4,Object(G.b)(Z,{token:t});case 4:return n=a.sent,a.next=7,Object(G.d)(y({user:n.data}));case 7:a.next=12;break;case 9:a.prev=9,a.t0=a.catch(1),console.log(a.t0);case 12:case"end":return a.stop()}}),$,null,[[1,9]])}function Q(){var e;return M.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(G.e)(_);case 3:return e=t.sent,t.next=6,Object(G.b)(z,{token:e.payload.token});case 6:t.next=0;break;case 8:case"end":return t.stop()}}),q)}var Y=[Object(G.c)(Q)],ee=M.a.mark(te);function te(){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(G.a)([].concat(Object(A.a)(W),Object(A.a)(Y)));case 2:case"end":return e.stop()}}),ee)}var ne=[],ae=[],re=Object(s.a)();ne.push(re),ne.push(l.a),ae.push(p.a.apply(void 0,ne));var ce=("undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||p.d).apply(void 0,ae),ue=Object(p.e)(F,{},ce);re.run(te),u.a.render(r.a.createElement(i.a,{store:ue},r.a.createElement(D,null)),document.getElementById("root"))}},[[49,1,2]]]);
//# sourceMappingURL=main.1002aec3.chunk.js.map